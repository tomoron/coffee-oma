$('#tag_area').html("<%= j(render partial: 'shared/tag_form', locals: {tags: @tags, target: @target}) %>");
$(".ui.accordion").accordion();
  $("#tag_form").dropdown({
    allowAdditions: true,
    className: {
      label: "ui teal label",
    },
  });
  $("#tag_form").keydown(function (e) {
    if (e.key === "Enter") {
      return false;
    }
  });

const message_html = `
<div class="ui container top-padding">
  <div class="ui positive message flash-message">
    <i class="close icon"></i>
    <div class="ui center aligned header" id="message">
      <font style="vertical-align: inherit;">タグを登録しました</font>
    </div>
  </div>
</div>
`
$('.ui.main.fixed.teal.inverted.menu').after(message_html)
$(".flash-message > .close").click(function () {
  $(".flash-message").closest(".ui.container.top-padding").transition("fade");
});
if ($("#tag_form").length) {
    $("#tag_form").dropdown({
      allowAdditions: true,
      forceSelection: false,
      saveRemoteData: false,
      hideAdditions: false,
      allowTab: false,
      showOnFocus: false,
      prepareHTML: false,
      className: {
        label: "ui teal label",
      },
      onAdd: () => {
        $(".menu.transition.visible").empty();
      },
      apiSettings: {
        url: gon.global.tag_form_url,
        cache: false,
      },
      message: {
        addResult: "{term} (0)",
        noResults: "登録されてません",
      },
    });
    $("#tag_form").keyup(function (e) {
      var form_value = $("input.search").val();
      if (form_value == "") {
        $(".menu.transition.visible").empty();
      }
    });
  }
