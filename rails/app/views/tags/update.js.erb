$('#tag_area').html("<%= j(render partial: 'shared/tag_form', locals: {tags: @tags, target: @target}) %>");
$('#flash_message').html("<%= j(render partial: 'shared/flash_message',locals: {notice: @notice,alert: @alert}) %>");
$(".ui.accordion").accordion();
  $("#tag_form").dropdown({
    allowAdditions: true,
    className: {
      label: "ui teal label",
    },
  });
  $("#tag_form").keydown(function (e) {
    if (e.key === "Enter") {
      return false;
    }
  });

if ($("#tag_form").length) {
    $("#tag_form").dropdown({
      allowAdditions: true,
      forceSelection: false,
      saveRemoteData: false,
      hideAdditions: false,
      allowTab: false,
      showOnFocus: false,
      prepareHTML: false,
      className: {
        label: "ui teal label",
      },
      onAdd: () => {
        $(".menu.transition.visible").empty();
      },
      apiSettings: {
        url: gon.global.tag_form_url,
        cache: false,
      },
      message: {
        addResult: "{term} (0)",
        noResults: "登録されてません",
      },
    });
    $("#tag_form").keyup(function (e) {
      var form_value = $("input.search").val();
      if (form_value == "") {
        $(".menu.transition.visible").empty();
      }
    });
  }
